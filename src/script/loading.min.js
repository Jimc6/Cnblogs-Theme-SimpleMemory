"use strict";(function(){var aj={};var an=aj.util={};var aA=Array.prototype.concat;var w=Array.prototype.slice;an.bind=function ax(aG,aF){var aE=w.call(arguments,2);return function(){aG.apply(aF,aA.call(aE,w.call(arguments)))}};an.extend=function X(aG,aF){for(var aE in aF){if(aF.hasOwnProperty(aE)){aG[aE]=aF[aE]}}};var i=aj.SpringSystem=function i(aE){this._springRegistry={};this._activeSprings=[];this.listeners=[];this._idleSpringIndices=[];this.looper=aE||new T();this.looper.springSystem=this};an.extend(i.prototype,{_springRegistry:null,_isIdle:true,_lastTimeMillis:-1,_activeSprings:null,listeners:null,_idleSpringIndices:null,setLooper:function Y(aE){this.looper=aE;aE.springSystem=this},createSpring:function ar(aE,aG){var aF;if(aE===undefined||aG===undefined){aF=q.DEFAULT_ORIGAMI_SPRING_CONFIG}else{aF=q.fromOrigamiTensionAndFriction(aE,aG)}return this.createSpringWithConfig(aF)},createSpringWithBouncinessAndSpeed:function L(aG,aE){var aF;if(aG===undefined||aE===undefined){aF=q.DEFAULT_ORIGAMI_SPRING_CONFIG}else{aF=q.fromBouncinessAndSpeed(aG,aE)}return this.createSpringWithConfig(aF)},createSpringWithConfig:function a(aF){var aE=new k(this);this.registerSpring(aE);aE.setSpringConfig(aF);return aE},getIsIdle:function p(){return this._isIdle},getSpringById:function af(aE){return this._springRegistry[aE]},getAllSprings:function m(){var aE=[];for(var aF in this._springRegistry){if(this._springRegistry.hasOwnProperty(aF)){aE.push(this._springRegistry[aF])}}return aE},registerSpring:function ap(aE){this._springRegistry[aE.getId()]=aE},deregisterSpring:function ak(aE){ai(this._activeSprings,aE);delete this._springRegistry[aE.getId()]},advance:function O(aJ,aH){while(this._idleSpringIndices.length>0){this._idleSpringIndices.pop()}for(var aI=0,aF=this._activeSprings.length;aI<aF;aI++){var aG=this._activeSprings[aI];if(aG.systemShouldAdvance()){aG.advance(aJ/1000,aH/1000)}else{this._idleSpringIndices.push(this._activeSprings.indexOf(aG))}}while(this._idleSpringIndices.length>0){var aE=this._idleSpringIndices.pop();aE>=0&&this._activeSprings.splice(aE,1)}},loop:function ah(aI){var aH;if(this._lastTimeMillis===-1){this._lastTimeMillis=aI-1}var aF=aI-this._lastTimeMillis;this._lastTimeMillis=aI;var aG=0,aE=this.listeners.length;for(aG=0;aG<aE;aG++){aH=this.listeners[aG];aH.onBeforeIntegrate&&aH.onBeforeIntegrate(this)}this.advance(aI,aF);if(this._activeSprings.length===0){this._isIdle=true;this._lastTimeMillis=-1}for(aG=0;aG<aE;aG++){aH=this.listeners[aG];aH.onAfterIntegrate&&aH.onAfterIntegrate(this)}if(!this._isIdle){this.looper.run()}},activateSpring:function h(aF){var aE=this._springRegistry[aF];if(this._activeSprings.indexOf(aE)==-1){this._activeSprings.push(aE)}if(this.getIsIdle()){this._isIdle=false;this.looper.run()}},addListener:function b(aE){this.listeners.push(aE)},removeListener:function z(aE){ai(this.listeners,aE)},removeAllListeners:function n(){this.listeners=[]}});var k=aj.Spring=function k(aE){this._id="s"+k._ID++;this._springSystem=aE;this.listeners=[];this._currentState=new G();this._previousState=new G();this._tempState=new G()};an.extend(k,{_ID:0,MAX_DELTA_TIME_SEC:0.064,SOLVER_TIMESTEP_SEC:0.001});an.extend(k.prototype,{_id:0,_springConfig:null,_overshootClampingEnabled:false,_currentState:null,_previousState:null,_tempState:null,_startValue:0,_endValue:0,_wasAtRest:true,_restSpeedThreshold:0.001,_displacementFromRestThreshold:0.001,listeners:null,_timeAccumulator:0,_springSystem:null,destroy:function f(){this.listeners=[];this.frames=[];this._springSystem.deregisterSpring(this)},getId:function t(){return this._id},setSpringConfig:function aC(aE){this._springConfig=aE;return this},getSpringConfig:function az(){return this._springConfig},setCurrentValue:function aq(aF,aE){this._startValue=aF;this._currentState.position=aF;if(!aE){this.setAtRest()}this.notifyPositionUpdated(false,false);return this},getStartValue:function u(){return this._startValue},getCurrentValue:function Z(){return this._currentState.position},getCurrentDisplacementDistance:function S(){return this.getDisplacementDistanceForState(this._currentState)},getDisplacementDistanceForState:function aD(aE){return Math.abs(this._endValue-aE.position)},setEndValue:function am(aF){if(this._endValue==aF&&this.isAtRest()){return this}this._startValue=this.getCurrentValue();this._endValue=aF;this._springSystem.activateSpring(this.getId());for(var aH=0,aE=this.listeners.length;aH<aE;aH++){var aI=this.listeners[aH];var aG=aI.onSpringEndStateChange;aG&&aG(this)}return this},getEndValue:function g(){return this._endValue},setVelocity:function l(aE){if(aE===this._currentState.velocity){return this}this._currentState.velocity=aE;this._springSystem.activateSpring(this.getId());return this},getVelocity:function I(){return this._currentState.velocity},setRestSpeedThreshold:function P(aE){this._restSpeedThreshold=aE;return this},getRestSpeedThreshold:function e(){return this._restSpeedThreshold},setRestDisplacementThreshold:function F(aE){this._displacementFromRestThreshold=aE},getRestDisplacementThreshold:function aB(){return this._displacementFromRestThreshold},setOvershootClampingEnabled:function R(aE){this._overshootClampingEnabled=aE;return this},isOvershootClampingEnabled:function ao(){return this._overshootClampingEnabled},isOvershooting:function o(){var aF=this._startValue;var aE=this._endValue;return this._springConfig.tension>0&&(aF<aE&&this.getCurrentValue()>aE||aF>aE&&this.getCurrentValue()<aE)},advance:function O(aK,aM){var aS=this.isAtRest();if(aS&&this._wasAtRest){return}var aI=aM;if(aM>k.MAX_DELTA_TIME_SEC){aI=k.MAX_DELTA_TIME_SEC}this._timeAccumulator+=aI;var aO=this._springConfig.tension,aJ=this._springConfig.friction,aY=this._currentState.position,aP=this._currentState.velocity,aV=this._tempState.position,aT=this._tempState.velocity,aF,aW,aR,aZ,aE,aH,aQ,aL,aX,aU;while(this._timeAccumulator>=k.SOLVER_TIMESTEP_SEC){this._timeAccumulator-=k.SOLVER_TIMESTEP_SEC;if(this._timeAccumulator<k.SOLVER_TIMESTEP_SEC){this._previousState.position=aY;this._previousState.velocity=aP}aF=aP;aW=aO*(this._endValue-aV)-aJ*aP;aV=aY+aF*k.SOLVER_TIMESTEP_SEC*0.5;aT=aP+aW*k.SOLVER_TIMESTEP_SEC*0.5;aR=aT;aZ=aO*(this._endValue-aV)-aJ*aT;aV=aY+aR*k.SOLVER_TIMESTEP_SEC*0.5;aT=aP+aZ*k.SOLVER_TIMESTEP_SEC*0.5;aE=aT;aH=aO*(this._endValue-aV)-aJ*aT;aV=aY+aE*k.SOLVER_TIMESTEP_SEC*0.5;aT=aP+aH*k.SOLVER_TIMESTEP_SEC*0.5;aQ=aT;aL=aO*(this._endValue-aV)-aJ*aT;aX=1/6*(aF+2*(aR+aE)+aQ);aU=1/6*(aW+2*(aZ+aH)+aL);aY+=aX*k.SOLVER_TIMESTEP_SEC;aP+=aU*k.SOLVER_TIMESTEP_SEC}this._tempState.position=aV;this._tempState.velocity=aT;this._currentState.position=aY;this._currentState.velocity=aP;if(this._timeAccumulator>0){this._interpolate(this._timeAccumulator/k.SOLVER_TIMESTEP_SEC)}if(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting()){if(this._springConfig.tension>0){this._startValue=this._endValue;this._currentState.position=this._endValue}else{this._endValue=this._currentState.position;this._startValue=this._endValue}this.setVelocity(0);aS=true}var aG=false;if(this._wasAtRest){this._wasAtRest=false;aG=true}var aN=false;if(aS){this._wasAtRest=true;aN=true}this.notifyPositionUpdated(aG,aN)},notifyPositionUpdated:function U(aF,aG){for(var aH=0,aE=this.listeners.length;aH<aE;aH++){var aI=this.listeners[aH];if(aF&&aI.onSpringActivate){aI.onSpringActivate(this)}if(aI.onSpringUpdate){aI.onSpringUpdate(this)}if(aG&&aI.onSpringAtRest){aI.onSpringAtRest(this)}}},systemShouldAdvance:function v(){return !this.isAtRest()||!this.wasAtRest()},wasAtRest:function J(){return this._wasAtRest},isAtRest:function K(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||this._springConfig.tension===0)},setAtRest:function A(){this._endValue=this._currentState.position;this._tempState.position=this._currentState.position;this._currentState.velocity=0;return this},_interpolate:function N(aE){this._currentState.position=this._currentState.position*aE+this._previousState.position*(1-aE);this._currentState.velocity=this._currentState.velocity*aE+this._previousState.velocity*(1-aE)},getListeners:function V(){return this.listeners},addListener:function b(aE){this.listeners.push(aE);return this},removeListener:function z(aE){ai(this.listeners,aE);return this},removeAllListeners:function n(){this.listeners=[];return this},currentValueIsApproximately:function C(aE){return Math.abs(this.getCurrentValue()-aE)<=this.getRestDisplacementThreshold()}});var G=function G(){};an.extend(G.prototype,{position:0,velocity:0});var q=aj.SpringConfig=function q(aE,aF){this.tension=aE;this.friction=aF};var T=aj.AnimationLooper=function T(){this.springSystem=null;var aF=this;var aE=function aE(){aF.springSystem.loop(Date.now())};this.run=function(){an.onFrame(aE)}};aj.SimulationLooper=function j(aE){this.springSystem=null;var aG=0;var aF=false;aE=aE||16.667;this.run=function(){if(aF){return}aF=true;while(!this.springSystem.getIsIdle()){this.springSystem.loop(aG+=aE)}aF=false}};aj.SteppingSimulationLooper=function(aE){this.springSystem=null;var aF=0;this.run=function(){};this.step=function(aG){this.springSystem.loop(aF+=aG)}};var y=aj.OrigamiValueConverter={tensionFromOrigamiValue:function H(aE){return(aE-30)*3.62+194},origamiValueFromTension:function B(aE){return(aE-194)/3.62+30},frictionFromOrigamiValue:function aa(aE){return(aE-8)*3+25},origamiFromFriction:function W(aE){return(aE-25)/3+8}};var c=aj.BouncyConversion=function(aH,aG){this.bounciness=aH;this.speed=aG;var aE=this.normalize(aH/1.7,0,20);aE=this.projectNormal(aE,0,0.8);var aF=this.normalize(aG/1.7,0,20);this.bouncyTension=this.projectNormal(aF,0.5,200);this.bouncyFriction=this.quadraticOutInterpolation(aE,this.b3Nobounce(this.bouncyTension),0.01)};an.extend(c.prototype,{normalize:function av(aG,aF,aE){return(aG-aF)/(aE-aF)},projectNormal:function al(aG,aF,aE){return aF+aG*(aE-aF)},linearInterpolation:function aw(aF,aG,aE){return aF*aE+(1-aF)*aG},quadraticOutInterpolation:function M(aF,aG,aE){return this.linearInterpolation(2*aF-aF*aF,aG,aE)},b3Friction1:function ad(aE){return 0.0007*Math.pow(aE,3)-0.031*Math.pow(aE,2)+0.64*aE+1.28},b3Friction2:function ac(aE){return 0.000044*Math.pow(aE,3)-0.006*Math.pow(aE,2)+0.36*aE+2},b3Friction3:function ab(aE){return 4.5e-7*Math.pow(aE,3)-0.000332*Math.pow(aE,2)+0.1078*aE+5.84},b3Nobounce:function ag(aE){var aF=0;if(aE<=18){aF=this.b3Friction1(aE)}else{if(aE>18&&aE<=44){aF=this.b3Friction2(aE)}else{aF=this.b3Friction3(aE)}}return aF}});an.extend(q,{fromOrigamiTensionAndFriction:function Q(aE,aF){return new q(y.tensionFromOrigamiValue(aE),y.frictionFromOrigamiValue(aF))},fromBouncinessAndSpeed:function x(aF,aE){var aG=new aj.BouncyConversion(aF,aE);return this.fromOrigamiTensionAndFriction(aG.bouncyTension,aG.bouncyFriction)},coastingConfigWithOrigamiFriction:function ae(aE){return new q(0,y.frictionFromOrigamiValue(aE))}});q.DEFAULT_ORIGAMI_SPRING_CONFIG=q.fromOrigamiTensionAndFriction(40,7);an.extend(q.prototype,{friction:0,tension:0});var r={};an.hexToRGB=function(aE){if(r[aE]){return r[aE]}aE=aE.replace("#","");if(aE.length===3){aE=aE[0]+aE[0]+aE[1]+aE[1]+aE[2]+aE[2]}var aG=aE.match(/.{2}/g);var aF={r:parseInt(aG[0],16),g:parseInt(aG[1],16),b:parseInt(aG[2],16)};r[aE]=aF;return aF};an.rgbToHex=function(aG,aF,aE){aG=aG.toString(16);aF=aF.toString(16);aE=aE.toString(16);aG=aG.length<2?"0"+aG:aG;aF=aF.length<2?"0"+aF:aF;aE=aE.length<2?"0"+aE:aE;return"#"+aG+aF+aE};var d=aj.MathUtil={mapValueInRange:function D(aK,aG,aL,aJ,aI){var aH=aL-aG;var aE=aI-aJ;var aF=(aK-aG)/aH;return aJ+aF*aE},interpolateColor:function E(aF,aI,aG,aM,aK,aL){aM=aM===undefined?0:aM;aK=aK===undefined?1:aK;aI=an.hexToRGB(aI);aG=an.hexToRGB(aG);var aE=Math.floor(an.mapValueInRange(aF,aM,aK,aI.r,aG.r));var aH=Math.floor(an.mapValueInRange(aF,aM,aK,aI.g,aG.g));var aJ=Math.floor(an.mapValueInRange(aF,aM,aK,aI.b,aG.b));if(aL){return"rgb("+aE+","+aH+","+aJ+")"}else{return an.rgbToHex(aE,aH,aJ)}},degreesToRadians:function at(aE){return aE*Math.PI/180},radiansToDegrees:function ay(aE){return aE*180/Math.PI}};an.extend(an,d);function ai(aG,aF){var aE=aG.indexOf(aF);aE!=-1&&aG.splice(aE,1)}var s;if(typeof window!=="undefined"){s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(aE){window.setTimeout(aE,1000/60)}}if(!s&&typeof process!=="undefined"&&process.title==="node"){s=setImmediate}an.onFrame=function au(aE){return s(aE)};if(typeof exports!="undefined"){an.extend(exports,aj)}else{if(typeof window!="undefined"){window.rebound=aj}}})();"use strict";var _createClass=function(){function a(e,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||false;d.configurable=true;if("value" in d){d.writable=true}Object.defineProperty(e,d.key,d)}}return function(d,b,c){if(b){a(d.prototype,b)}if(c){a(d,c)}return d}}();function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}var Polygon=function(){function c(){var h=arguments.length<=0||arguments[0]===undefined?100:arguments[0];var j=arguments.length<=1||arguments[1]===undefined?3:arguments[1];var k=arguments.length<=2||arguments[2]===undefined?0:arguments[2];var i=arguments[3];_classCallCheck(this,c);this._radius=h;this._sides=j;this._depth=k;this._colors=i;this._x=0;this._y=0;this.rotation=0;this.scale=1;this.points=this._getRegularPolygonPoints()}_createClass(c,[{key:"_getRegularPolygonPoints",value:function e(){var k=[];var j=0;while(j<this._sides){var h=-this._radius*Math.sin(j*2*Math.PI/this._sides);var l=this._radius*Math.cos(j*2*Math.PI/this._sides);k.push({x:h,y:l});j++}return k}},{key:"_getInscribedPoints",value:function g(j,i){var k=this;var h=[];j.forEach(function(o,n){var p=o;var m=j[n+1];if(!m){m=j[0]}var l=k._getInterpolatedPoint(p,m,i);h.push(l)});return h}},{key:"_getInterpolatedPoint",value:function f(i,l,h){var k=i.x;var j=i.y;var p=l.x;var o=l.y;var n=k+(p-k)*h;var m=j+(o-j)*h;return{x:n,y:m}}},{key:"_getUpdatedChildren",value:function a(j){var l=[];for(var k=0;k<this._depth;k++){var m=l[k-1]||this.points;var h=this._getInscribedPoints(m,j);l.push(h)}return l}},{key:"renderChildren",value:function b(j,h){var k=this;var i=this._getUpdatedChildren(h);i.forEach(function(o,n){j.beginPath();o.forEach(function(t){return j.lineTo(t.x,t.y)});j.closePath();var p=k._colors.stroke;var r=k._colors.child;if(p){j.strokeStyle=p;j.stroke()}if(r){var l=rebound.util.hexToRGB(r);var s=1/i.length;var q=s+s*n;var m="rgba("+l.r+", "+l.g+", "+l.b+", "+q+")";j.fillStyle=m;j.shadowColor="rgba(0,0,0, 0.1)";j.shadowBlur=10;j.shadowOffsetX=0;j.shadowOffsetY=0;j.fill()}})}},{key:"render",value:function d(h){h.save();h.translate(this._x,this._y);if(this.rotation!==0){h.rotate(rebound.MathUtil.degreesToRadians(this.rotation))}if(this.scale!==1){h.scale(this.scale,this.scale)}h.beginPath();this.points.forEach(function(k){return h.lineTo(k.x,k.y)});h.closePath();var i=this._colors.stroke;var j=this._colors.base;if(i){h.strokeStyle=i;h.stroke()}if(j){h.fillStyle=j;h.fill()}h.restore()}}]);return c}();"use strict";var _createClass=function(){function a(e,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||false;d.configurable=true;if("value" in d){d.writable=true}Object.defineProperty(e,d.key,d)}}return function(d,b,c){if(b){a(d.prototype,b)}if(c){a(d,c)}return d}}();function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}var Spinner=function(){function d(o){_classCallCheck(this,d);var m=o.id,r=o.radius,n=o.sides,p=o.depth,l=o.colors,k=o.alwaysForward,s=o.restAt,q=o.renderBase;if(n<3){console.warn("At least 3 sides required.");n=3}this._canvas=document.createElement("canvas");this._canvas.style.backgroundColor=l.background;this._canvas.style.zIndex=1100;this._canvasW=null;this._canvasH=null;this._canvasOpacity=1;this._centerX=null;this._centerY=null;this._alwaysForward=k;this._restThreshold=s;this._renderBase=q;this._springRangeLow=0;this._springRangeHigh=this._restThreshold||1;this._basePolygon=new Polygon(r,n,p,l);this._progress=0;this._isAutoSpin=null;this._isCompleting=null}_createClass(d,[{key:"init",value:function i(k,l){this._addCanvas();this._spring=k;this._addSpringListener();this._isAutoSpin=l;if(l){this._spin()}else{this._spring.setEndValue(0);this.render()}}},{key:"_addCanvas",value:function g(){document.body.appendChild(this._canvas);this._context=this._canvas.getContext("2d");this._setCanvasSize()}},{key:"_setCanvasSize",value:function c(){this._canvasW=this._canvas.width=window.innerWidth;this._canvasH=this._canvas.height=window.innerHeight;this._canvas.style.position="fixed";this._canvas.style.top=0;this._canvas.style.left=0;this._centerX=this._canvasW/2;this._centerY=this._canvasH/2}},{key:"_addSpringListener",value:function j(){var k=this;this._spring.addListener({onSpringUpdate:function l(m){var r=m.getCurrentValue();var n=0,q=1,p=k._springRangeLow,o=k._springRangeHigh;r=rebound.MathUtil.mapValueInRange(r,n,q,p,o);k.render(r)}})}},{key:"setComplete",value:function f(){this._isCompleting=true}},{key:"_completeAnimation",value:function b(){this._canvasOpacity=0;this._canvas.style.opacity=this._canvasOpacity;if(this._canvasOpacity<=0){this._isAutoSpin=false;this._spring.setAtRest();this._canvas.style.display="none";this._canvas.remove()}}},{key:"_spin",value:function h(){if(this._alwaysForward){var k=this._spring.getCurrentValue();if(this._restThreshold&&k===1){this._switchSpringRange()}if(k===1){this._spring.setCurrentValue(0).setAtRest()}}this._spring.setEndValue(this._spring.getCurrentValue()===1?0:1)}},{key:"_switchSpringRange",value:function e(){var k=this._restThreshold;this._springRangeLow=this._springRangeLow===k?0:k;this._springRangeHigh=this._springRangeHigh===k?1:k}},{key:"render",value:function a(k){if(k){this._progress=Math.round(k*10000)/10000}if(this._isAutoSpin&&this._spring.isAtRest()){this._spin()}if(this._isCompleting){this._completeAnimation()}this._context.clearRect(0,0,this._canvasW,this._canvasH);this._context.save();this._context.translate(this._centerX,this._centerY);this._context.lineWidth=1.5;if(this._renderBase){this._basePolygon.render(this._context)}this._basePolygon.renderChildren(this._context,this._progress);this._context.restore()}}]);return d}();"use strict";var pageLoading={settings:window.cnblogsConfig.loading,spring:null,spinner:null,initRebound:function initRebound(){var b=pageLoading.settings.rebound;var a=new rebound.SpringSystem();pageLoading.spring=a.createSpring(b.tension,b.friction)},initSpinner:function initSpinner(){var a=pageLoading.settings.spinner;pageLoading.spinner=new Spinner(a)},init:function init(){var a=true;pageLoading.initRebound();pageLoading.initSpinner();pageLoading.spinner.init(pageLoading.spring,a);if(a){setTimeout(function(){pageLoading.spinner.setComplete()},6000)}else{pageLoading.loadSomething()}},loadSomething:function loadSomething(){var a=new XMLHttpRequest();a.addEventListener("progress",function(b){if(b.lengthComputable){var c=Math.ceil(b.loaded/b.total*100);console.log("ajax loding percent",c);pageLoading.spring.setEndValue(c*0.01)}});a.addEventListener("load",function(b){pageLoading.spinner.setComplete()});a.open("GET","/img/something.jpg");a.send()}};