/*!
 * DATE: 2018-03-13
 * UPDATES AND DOCS AT: https://github.com/jimc6
 * https://www.cnblogs.com/jimc6/
 * @author: jimc6, dbnuo@foxmail.com
 **/
;function Base(){const a=this,b=new myTools,c=!!$("#topics").length;let progressBar=new ToProgress(window.cnblogsConfig.progressBar,"#bottomProgressBar"),temScroll=0,timeIds={setMenuIntroduceTId:null,setMenuCalendarTId:null,setSidebarSearchTId:null,setSidebarScorerankTId:null,setMenuSidebarTId:null,setMenuToptagsTId:null,setMenuClassifyTId:null,setMenuArticleCategoryTId:null,setMenuRecordTId:null,setMenuArticleTId:null,setMenuTopviewTId:null,setMenuTopDiggPostsTId:null,setMenuRecentCommentsTId:null,setHomeRightMenuTId:null,setNotHomeRightMenuTId:null,setCnzzTId:null,setAmazingTId:null,setCatalogTId:null,blogPostCategoryTId:null,entryTagTId:null,commentTId:null};this.init=function(){a.loadingBeforeInit();a.endLoading();a.loadingAfterInit();window.cnblogsConfig.hook.pageInitEnd(a)};this.loadingBeforeInit=function(){setTimeout(a.clearIntervalAll,30000);if(window.cnblogsConfig.fontIconExtend!==""){b.dynamicLoadingCss(window.cnblogsConfig.fontIconExtend)}c?a.notHomeInit():a.homeInit()};this.loadingAfterInit=function(){c?a.notHomeInitAfter():a.homeInitAfter();a.addFooter();if(window.cnblogsConfig.bgAnimationRendered){require(["RibbonsEffect"])}let shortcutIcon=$('link[rel="shortcut icon"]');if(shortcutIcon.length){shortcutIcon.attr("href",window.cnblogsConfig.webpageIcon)}else{let linkObject=document.createElement("link");linkObject.rel="shortcut icon";linkObject.href=window.cnblogsConfig.webpageIcon;document.getElementsByTagName("head")[0].appendChild(linkObject)}$(window).scroll(function(){a.scrollMonitor()});$(window).resize(function(){a.resizeMonitor()});$("#homeTopTitle").text(window.cnblogsConfig.blogUser);$("#menuWrap").optiscroll({forceScrollbars:true,maxTrackSize:20,preventParentScroll:true});let blogAvatar=window.cnblogsConfig.blogAvatar?window.cnblogsConfig.blogAvatar:"https://cdn.jsdelivr.net/gh/jimc6/Cnblogs-Theme-SimpleMemory@master/img/webp/default_avatar.webp";$("#menuBlogAvatar").append("<img src='"+blogAvatar+"'>");a.htmlTitle();a.setMenuUserInfoImg();let setMenuData=a.setMenuData();timeIds.setMenuIntroduceTId=window.setInterval(setMenuData.setIntroduce,1000);timeIds.setMenuCalendarTId=window.setInterval(setMenuData.setCalendar,1000);timeIds.setSidebarSearchTId=window.setInterval(setMenuData.setSidebarSearch,1000);timeIds.setSidebarScorerankTId=window.setInterval(setMenuData.setSidebarScorerank,1000);timeIds.setMenuSidebarTId=window.setInterval(setMenuData.setSidebar,1000);timeIds.setMenuToptagsTId=window.setInterval(setMenuData.setToptags,1000);timeIds.setMenuClassifyTId=window.setInterval(setMenuData.setClassify,1000);timeIds.setMenuArticleCategoryTId=window.setInterval(setMenuData.setArticleCategory,1000);timeIds.setMenuArticleTId=window.setInterval(setMenuData.setArticle,1000);timeIds.setMenuRecordTId=window.setInterval(setMenuData.setRecord,1000);timeIds.setMenuTopviewTId=window.setInterval(setMenuData.setTopview,1000);timeIds.setMenuTopDiggPostsTId=window.setInterval(setMenuData.setTopDiggPosts,1000);timeIds.setMenuRecentCommentsTId=window.setInterval(setMenuData.setRecentComments,1000);setMenuData.setCustomData();$(".m-list-title-select").click(function(){$(this).parents(".m-list-title").next(".m-icon-list").slideToggle(500)});window.cnblogsConfig.switchDayNight.enable&&a.setDayNightControl();if(window.cnblogsConfig.advertising){$("#ad_c1").show();$("#ad_c2").show();$("#ad_t1").show();$("#ad_t2").show();$("#cnblogs_c1").show();$("#cnblogs_c2").show();$("#under_post_kb").show();$("#under_post_news").show()}b.consoleText(window.cnblogsConfig.consoleList,"banner")};this.clearIntervalAll=function(){$.each(timeIds,function(d){null!=timeIds[d]&&window.clearInterval(timeIds[d])})};this.clearIntervalTimeId=function(d){null!=d&&window.clearInterval(d)};this.scrollMonitor=function(){let homeScroll=$("#home").offset().top-40,docScroll=$(document).scrollTop(),openButton=$("#open-button"),sideToolbar=$("#sideToolbar"),sideToolbarTop=$(".main-header").outerHeight(),scrollPercent=b.getScrollPercent(),toUpDown=$("#toUpDown"),toUpDownI=$("#toUpDownI"),toUpDownSpan=$(".toUpDownSpan");progressBar.setProgress(scrollPercent);if(sideToolbarTop<=docScroll){if(!sideToolbar.hasClass("sideToolbarFix")){sideToolbar.addClass("sideToolbarFix")}}else{sideToolbar.removeClass("sideToolbarFix")}if(homeScroll<=docScroll){toUpDownI.rotate({animateTo:0});toUpDown.attr("data","up");toUpDownSpan.text("返回顶部")}else{toUpDownI.rotate({animateTo:-180});toUpDown.attr("data","down");toUpDownSpan.text("跳至底部")}if(temScroll<docScroll){if(homeScroll<=docScroll){if(!openButton.hasClass("menu-button-scroll")){openButton.addClass("menu-button-scroll");openButton.text("")}}}else{if(homeScroll>=docScroll){if(openButton.hasClass("menu-button-scroll")){openButton.removeClass("menu-button-scroll");openButton.text("MENU")}}}temScroll=docScroll};this.resizeMonitor=function(){const d=parseFloat(document.body.clientWidth),e=$("#sideToolbar");a.setDomHomePosition();if(e.length>0){let mainContentWidth=$("#mainContent").outerWidth(true),sideCatalogBg=$("#sideCatalog"),listWidth=sideCatalogBg.outerWidth(true);listWidth=listWidth>220?listWidth:242;let bothWidth=(d-mainContentWidth)/2,rightPx=bothWidth-listWidth-50,catalogBtn=$(".catalog-btn"),sideToolbarTop=$(".main-header").outerHeight();e.css({top:(sideToolbarTop+5)+"px",right:(rightPx>0?rightPx:0)+"px"});if(d<=1350){sideCatalogBg.hide();sideCatalogBg.find("ul.nav li").length>0?catalogBtn.show():catalogBtn.hide()}else{catalogBtn.hide();sideCatalogBg.find("ul.nav li").length>0?sideCatalogBg.show():sideCatalogBg.hide()}}};this.rightMenuMous=function(e,d){$(e).on({mouseover:function(){let str="";if(d===".rightBuryitSpan"){str=$("#bury_count").text();if($(d).text()!==str){$(e).attr("clickflg","false");$(d).text(str)}}if(d===".rightDiggitSpan"){str=$("#digg_count").text();if($(d).text()!==str){$(e).attr("clickflg","false");$(d).text(str)}}$(d).show()},mouseout:function(){$(d).hide()},click:function(){if(d===".rightBuryitSpan"||d===".rightDiggitSpan"){if($(this).attr("clickflg")==="false"){$(this).attr("clickflg","true");$(d).text("提交中..");setTimeout("$('"+d+"').text($('#digg_tips').text())",1500)}}if(d===".attentionSpan"){if($(this).attr("clickflg")==="false"){setTimeout(f,1500);function f(){if("关注成功"===$.trim($("#p_b_follow").text())){$(e).attr("clickflg","true");$(d).text("已关注");$(e).find("i").removeClass("icon-dianzan").addClass("icon-dianzan1")}}}}if(d===".toUpDownSpan"){let ac=$(this).attr("data");if(ac==="down"){let docHeight=$(document).height();let windowHeight=$(window).height();b.actScroll(docHeight-windowHeight,900)}else{b.actScroll(0,900)}}}})};this.endLoading=function(){$("body").css("overflow","auto");pageLoading.spinner.setComplete();$("div#loading").hide();$('a[name="top"]').hide();window.cnblogsConfig.hook.afterLoading(a,pageLoading)};this.htmlTitle=function(){let RelTitle=document.title,hidden,visibilityChange,timer;if(typeof document.hidden!=="undefined"){hidden="hidden";visibilityChange="visibilitychange"}else{if(typeof document.mozHidden!=="undefined"){hidden="mozHidden";visibilityChange="mozvisibilitychange"}else{if(typeof document.webkitHidden!=="undefined"){hidden="webkitHidden";visibilityChange="webkitvisibilitychange"}}}function d(){if(timer){clearTimeout(timer)}if(document[hidden]){timer=setTimeout(function(){document.title=window.cnblogsConfig.webpageTitleOnblur+" - "+RelTitle.split(" - ")[0]},window.cnblogsConfig.webpageTitleOnblurTimeOut);window.cnblogsConfig.hook.pageLabelChanges(a,window.cnblogsConfig.webpageTitleOnblur)}else{document.title=window.cnblogsConfig.webpageTitleFocus;timer=setTimeout(function(){document.title=RelTitle},window.cnblogsConfig.webpageTitleFocusTimeOut);window.cnblogsConfig.hook.pageLabelChanges(a,window.cnblogsConfig.webpageTitleFocus)}}if(typeof document.addEventListener!=="undefined"||typeof document[hidden]!=="undefined"){document.addEventListener(visibilityChange,d,false)}};this.setDomHomePosition=function(){$("#home").css("margin-top",$(".main-header").outerHeight()+"px")};this.setPageAnimationControl=function(){if(window.cnblogsConfig.homeTopAnimationRendered||window.cnblogsConfig.essayTopAnimationRendered||window.cnblogsConfig.bgAnimationRendered){let html='<div id="pageAnimationOffOn" data="off">';html+='<span id="pageAnimationOffOnIcon" class="iconfont icon-shandian"></span>';html+='<span id="pageAnimationOffOnText">隐藏页面特效</span>';html+="</div>";$("body").prepend(html);$("#pageAnimationOffOn").click(function(){if($(this).attr("data")==="off"){$("body").find("canvas").hide();$("#pageAnimationOffOnIcon").rotate({animateTo:-360});$("#pageAnimationOffOnText").text("显示页面特效");$(this).attr("data","on")}else{$("body").find("canvas").show();$("#pageAnimationOffOnIcon").rotate({animateTo:360});$("#pageAnimationOffOnText").text("隐藏页面特效");$(this).attr("data","off")}})}};this.setDayNightControl=function(){let h=parseInt(new Date().getHours()),head=$("head"),cookieKey="cnblogs_config_isNight",exp=4*3600,daySwitch;switch(b.getCookie(cookieKey)){case"day":daySwitch="daySwitch";break;case"night":daySwitch="";break;default:daySwitch=window.cnblogsConfig.switchDayNight.auto.enable?(h>=window.cnblogsConfig.switchDayNight.auto.nightHour?"":(h>=window.cnblogsConfig.switchDayNight.auto.dayHour?"daySwitch":"")):"daySwitch";break}let html='<div id="dayNightSwitch" class="generalWrapper">    <div class="onOff '+daySwitch+'">        <div class="star star1"></div>        <div class="star star2"></div>        <div class="star star3"></div>        <div class="star star4"></div>        <div class="star star5"></div>        <div class="star sky"></div>        <div class="sunMoon">            <div class="crater crater1"></div>            <div class="crater crater2"></div>            <div class="crater crater3"></div>            <div class="cloud part1"></div>            <div class="cloud part2"></div>        </div>    </div></div>';$("body").prepend(html);if(!daySwitch){head.append('<link type="text/css" id="baseDarkCss" rel="stylesheet" href="'+getJsDelivrUrl("base.dark.css")+'">')}$("#dayNightSwitch .onOff").click(function(){if($(this).hasClass("daySwitch")){window.cnblogsConfig.hook.dayNightControl(a,"night");b.setCookie(cookieKey,"night",exp);$(this).removeClass("daySwitch");head.append('<link type="text/css" id="baseDarkCss" rel="stylesheet" href="'+getJsDelivrUrl("base.dark.css")+'">')}else{window.cnblogsConfig.hook.dayNightControl(a,"day");b.setCookie(cookieKey,"day",exp);$(this).addClass("daySwitch");$("head link#baseDarkCss").remove()}})};this.setMenuData=function(){function n(){let introduceHtml=$("#profile_block").html(),menuIntroduce=$("#introduce");if((typeof introduceHtml=="string")&&menuIntroduce.html()===""){menuIntroduce.html(b.htmlFiltrationScript(introduceHtml));a.clearIntervalTimeId(timeIds.setMenuIntroduceTId)}}function q(){let calendarTable=$("#blogCalendar"),calendar=$("#blog-calendar"),menuCalendar=$("#calendar-box");if(calendarTable.length>0&&menuCalendar.html()===""){let calendarHtml='<div id="blog-calendar">'+calendar.html()+"</div>";calendar.remove();menuCalendar.html(calendarHtml);$("#blog-calendar").css("visibility","visible");a.clearIntervalTimeId(timeIds.setMenuCalendarTId)}}function j(){let sidebarSearch=$("#sidebar_search_box"),menuSearchBox=$("#sb-sidebarSearchBox");if(sidebarSearch.length>0&&menuSearchBox.html()===""){menuSearchBox.html('<div id="sb_widget_my_zzk" class="div_my_zzk"><input id="q" type="text" onkeydown="return zzk_go_enter(event);" class="input_my_zzk"></div>').prev(".m-list-title").show();a.clearIntervalTimeId(timeIds.setSidebarSearchTId)}}function s(){let scorerank=$("#sidebar_scorerank ul li"),menuScorerank=$("#sb-sidebarScorerank");if(scorerank.length>0&&menuScorerank.html()===""){menuScorerank.html(w(scorerank,"icon-collection_fill")).prev(".m-list-title").show();a.clearIntervalTimeId(timeIds.setSidebarScorerankTId)}}function v(){let sidebar=$("#sidebar_recentposts ul li"),menuSidebar=$("#sb-sidebarRecentposts");if(sidebar.length>0&&menuSidebar.html()===""){menuSidebar.html(w(sidebar,"icon-time_fill")).prev(".m-list-title").show();a.clearIntervalTimeId(timeIds.setMenuSidebarTId)}}function t(){let toptags=$("#sidebar_toptags ul li"),menuToptags=$("#sb-toptags");if(toptags.length>0&&menuToptags.html()===""){menuToptags.html(w(toptags,"icon-label_fill")).prev(".m-list-title").show();a.clearIntervalTimeId(timeIds.setMenuToptagsTId)}}function d(){let sbClassify=$("#sidebar_postcategory ul li"),menuClassify=$("#sb-classify");if(sbClassify.length>0&&menuClassify.html()===""){menuClassify.html(w(sbClassify,"icon-marketing_fill")).prev(".m-list-title").show();a.clearIntervalTimeId(timeIds.setMenuClassifyTId)}}function u(){let sbArticleCategory=$("#sidebar_articlecategory ul li"),menuArticleCategory=$("#sb-ArticleCategory");if(sbArticleCategory.length>0&&menuArticleCategory.html()===""){menuArticleCategory.html(w(sbArticleCategory,"icon-marketing_fill")).prev(".m-list-title").show();a.clearIntervalTimeId(timeIds.setMenuArticleCategoryTId)}}function g(){let sbRecord=$("#sidebar_postarchive ul li"),menuRecord=$("#sb-record");if(sbRecord.length>0&&menuRecord.html()===""){menuRecord.html(w(sbRecord,"icon-task_fill")).prev(".m-list-title").show();a.clearIntervalTimeId(timeIds.setMenuRecordTId)}}function k(){let sbArticle=$("#sidebar_articlearchive ul li"),menuArticle=$("#sb-articlearchive");if(sbArticle.length>0&&menuArticle.html()===""){menuArticle.html(w(sbArticle,"icon-document_fill")).prev(".m-list-title").show();a.clearIntervalTimeId(timeIds.setMenuArticleTId)}}function l(){let sbTopview=$("#TopViewPostsBlock ul li"),menuTopview=$("#sb-topview");if(sbTopview.length>0&&menuTopview.html()===""){menuTopview.html(w(sbTopview,"icon-browse_fill")).prev(".m-list-title").show();a.clearIntervalTimeId(timeIds.setMenuTopviewTId)}}function f(){let topDiggPosts=$("#TopDiggPostsBlock ul li"),menuTopDiggPosts=$("#sb-topDiggPosts");if(topDiggPosts.length>0&&menuTopDiggPosts.html()===""){menuTopDiggPosts.html(w(topDiggPosts,"icon-like_fill")).prev(".m-list-title").show();a.clearIntervalTimeId(timeIds.setMenuTopDiggPostsTId)}}function e(){let recentComments=$("#sidebar_recentcomments ul"),menuRecentComments=$("#sb-recentComments");if(recentComments.length>0&&menuRecentComments.html()===""){menuRecentComments.html(r(recentComments,"icon-pinglunzu")).prev(".m-list-title").show();a.clearIntervalTimeId(timeIds.setMenuRecentCommentsTId)}}function m(){let customData=window.cnblogsConfig.menuCustomList;if(Object.keys(customData).length>0){$.each(customData,function(y,x){let html='<div class="m-list-title" style="display: block;"><span>'+y+"</span></div>";html+='<div class="m-icon-list"><div><ul>';$.each(x.data,function(z,A){html+='<li><a href="'+A[1]+'">';html+='<span class="iconfont '+x.icon+'" style="color: #888;font-size: 14px;margin-right: 5px;"></span>';html+=A[0]+"</a></li>"});html+="</ul></div></div>";$("#menuCustomList").append(html)})}}function w(y,x){let html="<div><ul>",ret=/^[1-9]+[0-9]*$/;y.each(function(z){let p=$(y[z]),o=p.text()===p.html()?{}:$(p.html()),textArr=$.trim(p.text()).split(".");if(ret.test(textArr[0])){textArr.splice(0,1)}let text=$.trim(textArr.join(".")),iconHtml='<span class="iconfont '+x+'" style="color: #888;font-size: 14px;margin-right: 5px;"></span>';o.length>0&&o.html(iconHtml+text);html+="<li>"+(o.length>0?o.prop("outerHTML"):"<a href='javascript:void(0);'>"+iconHtml+text+"</a>")+"</li>"});html+="</ul></div>";return html}function r(y,x){let html="<div><ul>",ret=/^[1-9]+[0-9]*$/,title,body,author;if(y.find("li").length>2){title=y.find("li.recent_comment_title");body=y.find("li.recent_comment_body");author=y.find("li.recent_comment_author");if(title.length!==body.length||title.length!==author.length){return}title.each(function(z){let p=$(title[z]),o=p.text()===p.html()?{}:$(p.html()),textArr=$.trim(p.text()).split(".");if(ret.test(textArr[0])){textArr.splice(0,1)}let text=$.trim(textArr.join(".")),iconHtml='<span class="iconfont '+x+'" style="color: #888;font-size: 15px;margin-right: 5px;"></span>';o.length>0&&o.html(iconHtml+text);html+="<li>"+(o.length>0?o.prop("outerHTML"):"<a href='javascript:void(0);'>"+iconHtml+text+"</a>")+'<div style="padding-left: 1.5em;color: #777;position: relative;top: -5px;">'+$(body[z]).text()+'</div><div style="text-align: right;color: #444;position: relative;top: -10px;">'+$(author[z]).text()+"</div></li>"})}html+="</ul></div>";return html}return{setIntroduce:n,setCalendar:q,setSidebarSearch:j,setSidebarScorerank:s,setSidebar:v,setToptags:t,setClassify:d,setArticleCategory:u,setArticle:k,setRecord:g,setTopview:l,setTopDiggPosts:f,setCustomData:m,setRecentComments:e}};this.setMenuUserInfoImg=function(){if(window.cnblogsConfig.menuUserInfoBgImg){$(".introduce-box").css({background:"#000 url("+window.cnblogsConfig.menuUserInfoBgImg+") center no-repeat","background-size":"100%"})}};this.addFooter=function(){const l=$("#footer"),d="https://github.com/"+window.cnblogsConfig.GhUserName+"/"+window.cnblogsConfig.GhRepositories+"/tree/"+window.cnblogsConfig.CnVersions,g="https://github.com/"+window.cnblogsConfig.GhUserName+"/"+window.cnblogsConfig.GhRepositories+"/tree/"+window.cnblogsConfig.GhVersions;let footerText=l.text();l.html('<div class="footer-box"></div>');let footerBox=$(".footer-box");if(window.cnblogsConfig.bottomText.left||window.cnblogsConfig.bottomText.right){footerBox.append('<div class="footer-text">[ '+window.cnblogsConfig.bottomText.left+'<span class="footer-text-icon"><span class="iconfont '+window.cnblogsConfig.bottomText.iconFont.icon+'" style="color: '+window.cnblogsConfig.bottomText.iconFont.color+";font-size: "+window.cnblogsConfig.bottomText.iconFont.fontSize+';"></span></span>'+window.cnblogsConfig.bottomText.right+" ]</div>")}footerBox.append('<div><span id="blogRunTimeSpan"></span><span class="my-face">ღゝ◡╹)ノ♡</span></div>');window.setInterval(k,500);footerBox.append('<div id="blogrollInfo"></div>');j();footerBox.append("<div>"+footerText+"</div>");footerBox.append('<div id="cnzzInfo"></div>');timeIds.setCnzzTId=window.setInterval(m,1000);footerBox.append('<div id="themeInfo"></div>');n();switch(parseInt(window.cnblogsConfig.footerStyle)){case 1:f();break;case 2:default:e();break}function f(){l.prepend('<div class="footer-image"></div>').addClass("footer-t1")}function e(){let html='<footer><footer-background><figure class="clouds"></figure><figure class="background"></figure><figure class="foreground"></figure></footer-background></footer>';l.prepend(html);$("#footer .footer-text").css({"padding-bottom":"0","border-bottom":"none","margin-bottom":"0"})}function k(){let runDate=b.getRunDate(window.cnblogsConfig.blogStartDate?window.cnblogsConfig.blogStartDate:"2019-01-01");$("#blogRunTimeSpan").text("This blog has running : "+runDate.daysold+" d "+runDate.hrsold+" h "+runDate.minsold+" m "+runDate.seconds+" s")}function j(){if(window.cnblogsConfig.bottomBlogroll.length>0){let blogrollArr=window.cnblogsConfig.bottomBlogroll;let blogrollHtml="友情链接：";for(let i=0;i<blogrollArr.length;i++){blogrollHtml+='<a href="'+(blogrollArr[i][1])+'" target="_blank">'+(blogrollArr[i][0])+"</a>";if(i<blogrollArr.length-1){blogrollHtml+='<span style="margin: 0 3px;">/</span>'}}$("#blogrollInfo").html(blogrollHtml)}}function m(){let cnzzStat=$(".id_cnzz_stat_icon a");if(cnzzStat.length>0){let cnzzInfo=[];let cnzzArr=$(cnzzStat[1]).text().split("|");$.each(cnzzArr,function(q){let str=$.trim(cnzzArr[q]);if(str!==""){str=str.replace("今日","Today").replace("昨日","Yesterday").replace("[",":").replace("]","");cnzzInfo.push(str)}});cnzzInfo.push($(cnzzStat[2]).text().replace("当前在线","Online").replace("[",":").replace("]",""));$("#cnzzInfo").text(cnzzInfo.join(" | "));a.clearIntervalTimeId(timeIds.setCnzzTId)}}function n(){$("#themeInfo").html('Theme version: <a href="'+d+'" target="_blank" style="color: #888;text-decoration: underline;">'+(window.cnblogsConfig.CnVersions).substring(0,7)+'</a> / Loading theme version: <a href="'+g+'" target="_blank" style="color: #888;text-decoration: underline;">'+(window.cnblogsConfig.GhVersions).substring(0,7)+"</a>")}};this.homeInit=function(){let homeTopImg=window.cnblogsConfig.homeTopImg,bgImg;homeTopImg.length>0?(homeTopImg.length>1?bgImg=homeTopImg[b.randomNum(0,homeTopImg.length-1)]:bgImg=homeTopImg[0]):bgImg="";$(".main-header").css({background:"#222 url("+encodeURI(bgImg)+")  center center no-repeat","background-size":"cover"});a.setHitokoto();a.scrollMonitor();a.setDomHomePosition()};this.homeInitAfter=function(){a.setHomePost();a.setEntryPost();$(".scroll-down").click(function(){let endScroll;endScroll=$("#home").offset().top+10;b.actScroll(endScroll,1000)});timeIds.setHomeRightMenuTId=window.setInterval(a.addHomeRightMenu,1000);if(window.cnblogsConfig.homeTopAnimationRendered){require(["circleMagic"],function(){$(".main-header").circleMagic(window.cnblogsConfig.homeTopAnimation)})}};this.setHomePost=function(){let read=$("#main .c_b_p_desc_readmore"),titleList=$("#main .postTitle");read.text("阅读全文 »");$.each(titleList,function(){let title=$(this),titleText=title.text(),postDescText=title.nextAll(".postDesc:eq(0)").text();title.after(a.getPostMetaHtml(postDescText));if(/\[置顶\]/.test(titleText)){title.append('<span class="postSticky">置顶</span>')}title.find("a").text(titleText.replace("[置顶]",""))})};this.setEntryPost=function(){let titleList=$("#main .entrylistPosttitle");$.each(titleList,function(){let title=$(this),postDescText=title.nextAll(".entrylistItemPostDesc:eq(0)").text();title.after(a.getPostMetaHtml(postDescText))})};this.setHitokoto=function(){if(window.cnblogsConfig.homeBannerText!==""){$("#hitokoto").text(window.cnblogsConfig.homeBannerText).css("display","-webkit-box");a.setDomHomePosition();return true}let topTitleList=["每一个不曾起舞的日子，都是对生命的辜负。","公主死去了，屠龙的少年还在燃烧","我们听过无数的道理，却仍旧过不好这一生。","生如夏花之绚烂，死如秋叶之静美。","但凡不能杀死你的，最终都会使你更强大。","好看的皮囊千篇一律，有趣的灵魂万里挑一。","青春是一本太仓促的书，我们含着泪，一读再读。","教育就是当一个人把在学校所学全部忘光之后剩下的东西。","孤独不是一种脾性，而是一种无奈。","有时候你以为天要塌下来了，其实是自己站歪了。","温柔正确的人总是难以生存，因为这世界既不温柔，也不正确。","死并非生的对立面，而作为生的一部分永存。","不要努力成为一个成功者，要努力成为一个有价值的人。","不要因为走得太远，忘了我们为什么出发。","你的问题主要在于读书不多而想得太多。","岁月不饶人，我亦未曾饶过岁月。","当你凝视深渊时，深渊也在凝视着你。","有的人25岁就死了，只是到75岁才埋葬"];let settings={};switch(window.cnblogsConfig.homeBannerTextType){case"one":settings={async:true,crossDomain:true,url:"https://sentence.iciba.com/index.php?callback=onecallback&c=dailysentence&m=getdetail&title="+b.getNowFormatDate(),method:"POST",dataType:"jsonp",headers:{"content-type":"application/x-www-form-urlencoded"},data:{TransCode:"030111",OpenId:"123456789",Body:""}};$.ajax(settings).done(function(d){if(d.errno===0){$("#hitokoto").text(d.note).css("display","-webkit-box");$("#hitokotoAuthor").text(d.content).show()}else{let listIndex=b.randomNum(0,topTitleList.length-1);$("#hitokoto").text(topTitleList[listIndex]).css("display","-webkit-box")}a.setDomHomePosition();return false});break;case"jinrishici":default:settings={async:true,crossDomain:true,url:"https://v2.jinrishici.com/one.json",method:"GET"};$.ajax(settings).done(function(d){if(d&&d.status==="success"){$("#hitokoto").text(d.data.content).css("display","-webkit-box");$("#hitokotoAuthor").text("《"+d.data.origin.title+"》 - "+d.data.origin.dynasty+" - "+d.data.origin.author).show()}else{let listIndex=b.randomNum(0,topTitleList.length-1);$("#hitokoto").text(topTitleList[listIndex]).css("display","-webkit-box")}a.setDomHomePosition();return false});break}};this.addHomeRightMenu=function(){const d=$("#rightMenu");if(d.length>0){let upDownHtml='<div id="toUpDown" data="up"><span class="rightMenuSpan toUpDownSpan">返回顶部</span><div id="toUpDownI"><i class="iconfont icon-zhiding"></i></div></div>';d.prepend(upDownHtml);a.rightMenuMous("#toUpDown",".toUpDownSpan");let clickStr=$("#p_b_follow").text()!==""?$("#p_b_follow a").attr("onclick"):"";let attHtml="";if(!clickStr||clickStr.indexOf("unfollow")>0){attHtml='<div id="attention" clickflg="true"><span class="rightMenuSpan attentionSpan">已关注</span><i class="iconfont icon-dianzan1"></i></div>'}else{attHtml='<div id="attention" onclick="'+clickStr.replace("unfollow","follow")+'" clickflg="false"><span class="rightMenuSpan attentionSpan">关注</span><i class="iconfont icon-dianzan"></i></div>'}d.prepend(attHtml);a.rightMenuMous("#attention",".attentionSpan");a.scrollMonitor();a.clearIntervalTimeId(timeIds.setHomeRightMenuTId)}};this.notHomeInit=function(){const d=$("#cb_post_title_url").text();$("#sbTitle").text(d);$(".inner").css("max-width","100vw");a.setArticleInfoAuthor();timeIds.blogPostCategoryTId=window.setInterval(a.setArticleInfoClass,1000);timeIds.entryTagTId=window.setInterval(a.setArticleInfoTag,1000);a.setDomHomePosition()};this.notHomeInitAfter=function(){a.setNotHomeTopImg();if($("#bookListFlg").length>0){a.setBookList()}a.setCodeHighlighting();a.baguetteBox();require(["title","marvin","articleStatement"],function(){timeIds.setCatalogTId=window.setInterval(a.initCatalog,1000);a.scrollMonitor();$("#sideCatalog-catalog").mCustomScrollbar({theme:"minimal-dark",axis:"yx"})});timeIds.setNotHomeRightMenuTId=window.setInterval(a.addNotHomeRightMenu,1000);a.setCommentStyle()};this.setArticleInfoAuthor=function(){$("#articleInfo").append('<p class="article-info-text"></p>');let postDescTid=window.setInterval(function(){if($("#post_view_count").text()!=="..."&&$("#post_comment_count").text()!=="..."){let postDescText=$(".postDesc").show().text();$("#articleInfo p.article-info-text").html(a.getPostMetaHtml(postDescText));a.clearIntervalTimeId(postDescTid)}},1000)};this.getPostMetaInfo=function(d){d=d.replace(/[\r\n]/g,"");let postMetaRex=/.*posted\s*@\s*([0-9\-:\s]{16}).*阅读\s*\(([0-9]*)\).*评论\s*\(([0-9]*)\).*推荐\s*\(([0-9]*)\).*/,postMetaRex2=/.*posted\s*@\s*([0-9\-:\s]{16}).*阅读\s*\(([0-9]*)\).*评论\s*\(([0-9]*)\).*/,postMetaRex3=/.*posted\s*@\s*([0-9\-:\s]{16}).*/,diggCount=$("#digg_count"),info=d.match(postMetaRex)||d.match(postMetaRex2)||d.match(postMetaRex3),date=typeof info[1]==="undefined"?"1970-01-01 00:00":info[1],vnum=typeof info[2]==="undefined"?"0":info[2],cnum=typeof info[3]==="undefined"?"0":info[3],tnum=typeof info[4]==="undefined"?(diggCount.length?diggCount.text():"0"):info[4];return{date:date,vnum:vnum,cnum:cnum,tnum:tnum}};this.getPostMetaHtml=function(d){let info=a.getPostMetaInfo(d);let html='<span class="postMeta"><i class="iconfont icon-time1"></i>发表于 '+info.date+'<i class="iconfont icon-browse"></i>阅读：'+info.vnum+'<i class="iconfont icon-interactive"></i>评论：'+info.cnum+'<i class="iconfont icon-hot"></i>推荐：'+info.tnum+"</span>";return html};this.setArticleInfoClass=function(){let obj=$("#BlogPostCategory").find("a");if(obj.length>0){$.each(obj,function(){let tag=$(this);tag.prepend('<span class="iconfont icon-marketing_fill"></span>');$("#articleInfo").append('<a href="'+tag.attr("href")+'" target="_blank"><span class="article-info-tag article-tag-class-color">'+(tag.text())+"</span></a>")});a.clearIntervalTimeId(timeIds.blogPostCategoryTId)}};this.setArticleInfoTag=function(){let obj=$("#EntryTag").find("a");if(obj.length>0){$.each(obj,function(){let tag=$(this);tag.prepend('<span class="iconfont icon-label_fill"></span>');$("#articleInfo").append('<a href="'+tag.attr("href")+'" target="_blank"><span class="article-info-tag article-tag-color">'+(tag.text())+"</span></a>")});a.clearIntervalTimeId(timeIds.entryTagTId)}};this.initCatalog=function(){const d=$("#sideToolbar");if(d.length>0){d.prepend('<span class="catalog-btn"><i class="iconfont icon-menudots"></i></span>').fadeIn(300);$(".catalog-btn").click(function(){$(".sideCatalogBg").toggle()});a.resizeMonitor();a.clearIntervalTimeId(timeIds.setCatalogTId)}};this.setNotHomeTopImg=function(){let essayTopImg=window.cnblogsConfig.essayTopImg,bgImg;essayTopImg.length>0?(essayTopImg.length>1?bgImg=essayTopImg[b.randomNum(0,essayTopImg.length-1)]:bgImg=essayTopImg[0]):bgImg="";$(".main-header").css({height:"40vh",background:"#222 url("+encodeURI(bgImg)+")  center center no-repeat","background-size":"cover"});$("#homeTopTitle").hide();$(".scroll-down").hide();$("#home").css("margin-top","40vh");$("#cb_post_title_url").addClass("post-del-title");if(window.cnblogsConfig.essayTopAnimationRendered){if(window.cnblogsConfig.essayTopAnimation.colorsRandom){let colors=[];colors.push(b.getRandomColor());colors.push(b.getRandomColor());colors.push(b.getRandomColor());colors.push(b.getRandomColor());colors.push(b.getRandomColor());colors.push(b.getRandomColor());colors.push(b.getRandomColor());colors.push(b.getRandomColor());colors.push(b.getRandomColor());window.cnblogsConfig.essayTopAnimation.colors=colors}require(["TweenMax_MyTween"],function(){initCanvas("notHomeTopCanvas");start()})}};this.baguetteBox=function(){const d=$("#cnblogs_post_body"),e=$("#cnblogs_post_body img");if(d.length>0&&e.length>0){$.each(e,function(f){let tem=$(e[f]);if(!tem.hasClass("code_img_closed")&&!tem.hasClass("code_img_opened")){tem.wrap('<a data-fancybox="gallery" href="'+tem.attr("src")+'"></a>')}})}require(["fancybox"])};this.setBookList=function(){if(window.cnblogsConfig.bookList.length>0){let postBody=$("#cnblogs_post_body"),html="";$.each(window.cnblogsConfig.bookList,function(d){let list=window.cnblogsConfig.bookList[d];html+="<h1>"+list.title+"</h1>";$.each(list.books,function(e){let book=list.books[e];html+='<div class="books-item">    <span class="books-item-span">        <div class="_1P9uD _3D3vq">            <div class="_2aw_6">'+(e+1)+'</div>        </div>        <div class="_28asT">            <svg>                <image xlink:href="'+book.cover+'" x="0" y="0" width="100%" height="100%"></image>            </svg>        </div>        <div class="_34CGc">            <div class="_2girK">                <div>                    <div class="_1P9dH">'+(book.name?book.name:"")+"                    </div>"+(book.formerNname?'<div class="_3Oa5I"><span class="_6Y7v3">原名：</span>'+book.formerNname+"</div>":"")+(book.author?'<div class="_3Oa5I"><span class="_6Y7v3">作者：</span>'+book.author+"</div>":"")+(book.translator?'<div class="_3Oa5I"><span class="_6Y7v3">译者：</span>'+book.translator+"</div>":"")+(book.press?'<div class="_3Oa5I"><span class="_6Y7v3">出版社：</span>'+book.press+"</div>":"")+(book.year?'<div class="_3Oa5I"><span class="_6Y7v3">出版年：</span>'+book.year+"</div>":"")+"                </div>            </div>        </div>    </span></div>"})});postBody.append(html)}};this.setCodeHighlighting=function(){let pre=$(".post pre"),codeSpan=$(".cnblogs_code span"),hltype=window.cnblogsConfig.essayCodeHighlightingType.toLowerCase(),hltheme=window.cnblogsConfig.essayCodeHighlighting.toLowerCase();switch(hltype){case"highlightjs":d(1);e();break;case"prettify":d(1);k();break;case"cnblogs":default:d(2);g();break}f();j();window.cnblogsConfig.hook.afterCodeHighlighting(a);function j(){$(".cnblogs_code_toolbar").remove();require(["clipboard"],function(){pre.each(function(l){let obj=$(this),id=b.randomString(6);obj.wrap('<code-box id="'+id+'" style="position: relative;display: block;"></code-box>');obj.attr("id","pre-"+id);let html='<button code-id="'+id+'" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-'+id+'" aria-label="复制代码" ><i class="iconfont icon-fuzhi1"></i></button>';$("#"+id).prepend(html)});$("code-box button").click(function(){$(this).find("i").removeClass("icon-fuzhi1").addClass("icon-right");setTimeout("$('code-box button[code-id="+$(this).attr("code-id")+"] i').removeClass('icon-right').addClass('icon-fuzhi1')",1500)});$("code-box").on({mouseover:function(){$(this).find("button").css({opacity:1,visibility:"visible"})},mouseout:function(){$(this).find("button").css({opacity:0,visibility:"hidden"})}});new ClipboardJS(".clipboard")})}function g(){codeSpan.css("background-color","#f6f8fa");pre.css({"background-color":"#f6f8fa","overflow-x":"auto"});let codeHljs=$("code.hljs");codeHljs.each(function(){let hj=$(this);hj.after(hj.html());hj.remove()})}function e(){b.dynamicLoadingCss("https://cdn.jsdelivr.net/gh/jimc6/"+(window.cnblogsConfig.GhRepositories)+"@"+(window.cnblogsConfig.GhVersions)+"/src/style/highlightjs/"+hltheme+".min.css");require(["highlightjs"],function(){$(".post pre").each(function(l,m){if($.inArray(hltheme,["github-gist","googlecode","grayscale","idea","isbl-editor-light","qtcreator_light","tomorrow","vs","xcode","arduino-light","ascetic","color-brewer","lightfair"])!==-1){pre.css("background-color","#f6f8fa")}hljs.highlightBlock(m)})})}function k(){pre.addClass("prettyprint");switch(hltheme){case"prettify":require(["codePrettify"],function(){$("pre").css("background-color","#f6f8fa").css("border","0")});break;case"desert":require(["codeDesert"]);break;case"sunburst":require(["codeSunburst"]);break;case"obsidian":require(["codeObsidian"]);break;case"doxy":require(["codeDoxy"]);break;default:g();break}}function d(l){window.cnblogsConfig.hook.beforeCodeHighlighting(a);let cssText="font-family:"+window.cnblogsConfig.essayCode.fontFamily+" !important; font-size: "+window.cnblogsConfig.essayCode.fontSize+" !important;";if(window.cnblogsConfig.codeMaxHeight){cssText+="max-height: 70vh;"}pre.css("cssText",cssText);$.each(pre,function(m){let obj=$(this),pid="pre-"+b.randomString(6),codeLine,html="";switch(l){case 1:codeLine=obj.text().split("\n");break;case 2:codeLine=obj.html().split("\n");break}obj.html('<code-pre class="code-pre" id="'+pid+'"></code-pre>');$.each(codeLine,function(n){let isEnd=n===codeLine.length-1,fg=isEnd?"":"\n";if(isEnd){if(codeLine[n]&&codeLine[n]!=="</code>"){html+='<code-line class="line-numbers-rows"></code-line>'}}else{html+='<code-line class="line-numbers-rows"></code-line>'}switch(l){case 1:html+=b.HTMLEncode(codeLine[n])+fg;break;case 2:html+=codeLine[n]+fg;break}});let codePre=$("#"+pid);codePre.append(html);window.cnblogsConfig.codeLineNumber&&codePre.addClass("code-pre-line")});window.cnblogsConfig.codeLineNumber&&$(".line-numbers-rows").show()}function f(){b.dynamicLoadingCss(getJsDelivrUrl("jquery.mCustomScrollbar.css"));let scrollbarTimeId=window.setInterval(function(){if($(".post pre span").length>0){$(".post pre").mCustomScrollbar({theme:"minimal-dark",axis:"yx"});let color;switch(hltype){case"highlightjs":color=$(".hljs-comment").css("color");$(".mCSB_dragger_bar").css("background-color",color);break;case"prettify":color=$(".com").css("color");$(".mCSB_dragger_bar").css("background-color",color);break;case"cnblogs":color="rgb(153, 153, 153)";break}$("code-box button").css("color",color);a.clearIntervalTimeId(scrollbarTimeId)}},500)}};this.setCommentStyle=function(){timeIds.commentTId=window.setInterval(function(){if($(".feedbackItem").length>0){d();a.clearIntervalTimeId(timeIds.commentTId)}},1000);function d(){let feedbackItem=$(".feedbackItem");if(feedbackItem.length>0){$.each(feedbackItem,function(e){let obj=$(this),feedbackCon=obj.find(".feedbackCon"),feedbackListSubtitle=obj.find(".feedbackListSubtitle"),commentBody=feedbackCon.length?feedbackCon.find(".blog_comment_body"):[],avatarHtml="",idInfo=commentBody.length?commentBody.attr("id").split("_"):undefined;if(idInfo&&idInfo.length>0){let id=idInfo[idInfo.length-1],idTmp=id.toString().match(/[0-9]/g);if($.isArray(idTmp)){id=idTmp.join("")}let op=$("#comment_"+id+"_avatar"),patch=op.length>0?$.trim(op.text()):"https://cdn.jsdelivr.net/gh/jimc6/Cnblogs-Theme-SimpleMemory@master/img/webp/default_avatar.webp";let ac=$("#a_comment_author_"+id),ah=ac.length?ac.attr("href"):"javascropt:void(0);";avatarHtml='<div class="feedbackAvatar"><a href="'+ah+'" target="_blank"><img src="'+patch+'"/></a></div>';obj.prepend(avatarHtml)}if(feedbackListSubtitle.length&&feedbackListSubtitle.find(".louzhu").length){feedbackListSubtitle.addClass("feedbackListSubtitle-louzhu")}});$(feedbackItem[0]).css("padding-top","0");$(feedbackItem[feedbackItem.length-1]).css("padding-bottom","0");let cssText="font-family:"+window.cnblogsConfig.essayCode.fontFamily+" !important; font-size: "+window.cnblogsConfig.essayCode.fontSize+" !important; border-radius: 5px;padding: 10px;";if(window.cnblogsConfig.essayCodeHighlightingType==="cnblogs"){cssText+="color: #000;"}$("head").append("<style>.feedbackCon pre {"+cssText+"background-color: "+$(".postBody pre").css("background-color")+" !important;}</style>")}}};this.addNotHomeRightMenu=function(){let rightMenu=$("#rightMenu");if(rightMenu.length>0&&$("#div_digg").length>0){if($("#toUpDown").length===0&&$("#attention").length===0){a.addHomeRightMenu()}let rightBuryitHtml='<div id="rightBuryit" clickflg="false" onclick="'+($(".buryit").attr("onclick"))+'"><span class="rightMenuSpan rightBuryitSpan">'+$("#bury_count").text()+'</span><i class="iconfont icon-buzan"></i></div>';rightMenu.prepend(rightBuryitHtml);a.rightMenuMous("#rightBuryit",".rightBuryitSpan");let rightDiggitHtml='<div id="rightDiggit" clickflg="false" onclick="'+($(".diggit").attr("onclick"))+'"><span class="rightMenuSpan rightDiggitSpan">'+$("#digg_count").text()+'</span><i class="iconfont icon-zan1"></i></div>';rightMenu.prepend(rightDiggitHtml);a.rightMenuMous("#rightDiggit",".rightDiggitSpan");if(window.cnblogsConfig.reward.enable&&(window.cnblogsConfig.reward.alipay||window.cnblogsConfig.reward.wechatpay)){let rightDashangHtml='<div id="rightDashang" clickflg="false"><span class="rightMenuSpan rightDanshanSpan"><div class="ds-pay">'+(window.cnblogsConfig.reward.alipay?'<div class="ds-alipay"><img src="'+window.cnblogsConfig.reward.alipay+'"><span>Alipay</span></div>':"")+(window.cnblogsConfig.reward.wechatpay?'<div class="ds-wecat"><img src="'+window.cnblogsConfig.reward.wechatpay+'"><span>WeChat</span></div>':"")+'</div></span><i class="iconfont icon-shang"></i></div>';rightMenu.prepend(rightDashangHtml);a.rightMenuMous("#rightDashang",".rightDanshanSpan")}a.clearIntervalTimeId(timeIds.setNotHomeRightMenuTId)}}};